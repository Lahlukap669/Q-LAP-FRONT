import{a as V}from"./api-DUlGAOJP.js";import{_ as c,c as d,b as _,a as r,d as f,n as v,t as w,o as u,r as y,e as n,f as b,w as h,g as k}from"./index-Da2PU-7I.js";import{A as S}from"./AppAlert-CPz9EppH.js";const N={name:"InputField",props:{id:String,type:{type:String,default:"text"},label:String,icon:String,placeholder:String,modelValue:String,disabled:Boolean,required:Boolean},emits:["update:modelValue"]},F={class:"mb-4"},P=["for"],q=["id","type","placeholder","value","disabled","required"];function C(l,e,o,m,s,a){return u(),d("div",F,[o.label?(u(),d("label",{key:0,for:o.id,class:"block text-gray-700 font-medium mb-2"},[o.icon?(u(),d("i",{key:0,class:v([o.icon,"mr-2 text-blue-500"])},null,2)):_("",!0),f(" "+w(o.label),1)],8,P)):_("",!0),r("input",{id:o.id,type:o.type,placeholder:o.placeholder,value:o.modelValue,onInput:e[0]||(e[0]=t=>l.$emit("update:modelValue",t.target.value)),disabled:o.disabled,required:o.required,class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"},null,40,q)])}const B=c(N,[["render",C]]),A={name:"PasswordField",props:{id:String,label:String,placeholder:String,modelValue:String,disabled:Boolean,required:Boolean},emits:["update:modelValue"],data(){return{showPassword:!1}}},R={class:"mb-4 relative"},U=["for"],j={class:"relative"},I=["id","type","placeholder","value","disabled","required"];function T(l,e,o,m,s,a){return u(),d("div",R,[o.label?(u(),d("label",{key:0,for:o.id,class:"block text-gray-700 font-medium mb-2"},[e[2]||(e[2]=r("i",{class:"fas fa-lock mr-2 text-blue-500"},null,-1)),f(" "+w(o.label),1)],8,U)):_("",!0),r("div",j,[r("input",{id:o.id,type:s.showPassword?"text":"password",placeholder:o.placeholder,value:o.modelValue,onInput:e[0]||(e[0]=t=>l.$emit("update:modelValue",t.target.value)),disabled:o.disabled,required:o.required,class:"w-full px-4 py-3 pr-12 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"},null,40,I),r("button",{type:"button",onClick:e[1]||(e[1]=t=>s.showPassword=!s.showPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition duration-200"},[r("i",{class:v(s.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])}const E=c(A,[["render",T]]),z={name:"CheckboxField",props:{id:String,modelValue:Boolean,disabled:Boolean,required:Boolean},emits:["update:modelValue"]},G={class:"flex items-start mb-4"},M=["id","checked","disabled","required"],J=["for"];function L(l,e,o,m,s,a){return u(),d("div",G,[r("input",{id:o.id,type:"checkbox",checked:o.modelValue,onChange:e[0]||(e[0]=t=>l.$emit("update:modelValue",t.target.checked)),disabled:o.disabled,required:o.required,class:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,40,M),r("label",{for:o.id,class:"ml-3 text-sm text-gray-700 cursor-pointer"},[y(l.$slots,"default")],8,J)])}const Q=c(z,[["render",L]]),Z={name:"SubmitButton",props:{loading:Boolean,disabled:Boolean}},H=["disabled"];function K(l,e,o,m,s,a){return u(),d("button",{type:"submit",disabled:o.disabled,class:"submit-button w-full py-3 px-6 text-white font-bold text-lg rounded-xl transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},[y(l.$slots,"default",{},void 0,!0)],8,H)}const O=c(Z,[["render",K],["__scopeId","data-v-6dc4072b"]]),W={name:"RegistrationForm",components:{InputField:B,PasswordField:E,CheckboxField:Q,SubmitButton:O},props:{loading:Boolean},emits:["submit"],data(){return{form:{firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",isTrainer:!1,gdprConsent:!1}}},computed:{passwordError(){if(this.form.password&&this.form.confirmPassword){if(this.form.password!==this.form.confirmPassword)return"Gesli se ne ujemata";if(this.form.password.length<6)return"Geslo mora biti dolgo vsaj 6 znakov"}return null},isFormValid(){return this.form.firstName&&this.form.lastName&&this.form.email&&this.form.phoneNumber&&this.form.password&&this.form.confirmPassword&&this.form.gdprConsent&&!this.passwordError}},methods:{handleSubmit(){this.isFormValid&&this.$emit("submit",this.form)}}},X={class:"grid grid-cols-2 gap-4"},Y={key:0,class:"text-red-500 text-sm"};function D(l,e,o,m,s,a){const t=b("InputField"),p=b("PasswordField"),g=b("CheckboxField"),x=b("SubmitButton");return u(),d("form",{onSubmit:e[8]||(e[8]=k((...i)=>a.handleSubmit&&a.handleSubmit(...i),["prevent"])),class:"space-y-4"},[r("div",X,[n(t,{id:"firstName",type:"text",label:"Ime",icon:"fas fa-user",placeholder:"John",modelValue:s.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=i=>s.form.firstName=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(t,{id:"lastName",type:"text",label:"Priimek",icon:"fas fa-user",placeholder:"Doe",modelValue:s.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=i=>s.form.lastName=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"])]),n(t,{id:"email",type:"email",label:"Email",icon:"fas fa-envelope",placeholder:"john.doe@example.com",modelValue:s.form.email,"onUpdate:modelValue":e[2]||(e[2]=i=>s.form.email=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(t,{id:"phoneNumber",type:"tel",label:"Telefonska številka",icon:"fas fa-phone",placeholder:"+1 (555) 123-4567",modelValue:s.form.phoneNumber,"onUpdate:modelValue":e[3]||(e[3]=i=>s.form.phoneNumber=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(p,{id:"password",label:"Geslo",placeholder:"Ustvari geslo",modelValue:s.form.password,"onUpdate:modelValue":e[4]||(e[4]=i=>s.form.password=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(p,{id:"confirmPassword",label:"Potrdite geslo",placeholder:"Potrdi geslo",modelValue:s.form.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=i=>s.form.confirmPassword=i),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),a.passwordError?(u(),d("div",Y,w(a.passwordError),1)):_("",!0),n(g,{id:"isTrainer",modelValue:s.form.isTrainer,"onUpdate:modelValue":e[6]||(e[6]=i=>s.form.isTrainer=i),disabled:o.loading},{default:h(()=>e[9]||(e[9]=[r("i",{class:"fas fa-dumbbell mr-2 text-blue-500"},null,-1),f("Sem trener/ka ")])),_:1,__:[9]},8,["modelValue","disabled"]),n(g,{id:"gdprConsent",modelValue:s.form.gdprConsent,"onUpdate:modelValue":e[7]||(e[7]=i=>s.form.gdprConsent=i),disabled:o.loading,required:""},{default:h(()=>e[10]||(e[10]=[f(" Strinjam se z "),r("a",{href:"#",class:"text-blue-600 hover:text-blue-800"},"določili in pogoji",-1),f(" ter z "),r("a",{href:"#",class:"text-blue-600 hover:text-blue-800"},"Zasebno politiko",-1)])),_:1,__:[10]},8,["modelValue","disabled"]),n(x,{loading:o.loading,disabled:o.loading||!a.isFormValid,class:"w-full"},{default:h(()=>[e[11]||(e[11]=r("i",{class:"fas fa-user-plus mr-2"},null,-1)),f(" "+w(o.loading?"Ustvarjam račun...":"Ustvari račun"),1)]),_:1,__:[11]},8,["loading","disabled"])],32)}const $=c(W,[["render",D]]),ee={name:"RegistrationFooter"},oe={class:"mt-6 text-center"},se={class:"text-gray-600 text-sm"};function te(l,e,o,m,s,a){const t=b("router-link");return u(),d("div",oe,[r("div",se,[e[1]||(e[1]=f(" Že imaš račun? ")),n(t,{to:"/login",class:"text-blue-600 hover:text-blue-800 font-semibold transition duration-200"},{default:h(()=>e[0]||(e[0]=[f(" Prijava ")])),_:1,__:[0]})])])}const le=c(ee,[["render",te]]),re={name:"RegisterView",components:{RegistrationForm:$,RegistrationFooter:le,AppAlert:S},data(){return{loading:!1,alert:{show:!1,type:"info",message:""}}},methods:{showAlert(l,e){this.alert={show:!0,type:l,message:e}},async handleRegister(l){var e,o,m,s,a;this.loading=!0;try{const t=await V.post("/auth/register",{first_name:l.firstName,last_name:l.lastName,phone_number:l.phoneNumber,email:l.email,password:l.password,role:l.isTrainer?2:1,gdpr_consent:l.gdprConsent});this.showAlert("success",t.data.message||"Uporabnik uspešno registriran"),setTimeout(()=>{this.$router.push("/login")},2e3)}catch(t){if(console.error("Registration error:",t),((e=t.response)==null?void 0:e.status)===400)this.showAlert("error",t.response.data.message||"Neveljaven zahtevek.");else if(((o=t.response)==null?void 0:o.status)===409)this.showAlert("error","Uporabnik s tem e-poštnim naslovom že obstaja.");else if(((m=t.response)==null?void 0:m.status)>=500)this.showAlert("error","Napaka strežnika. Poskusi kasneje.");else{const p=((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Registracija ni uspešna. Poskusite ponovno.";this.showAlert("error",p)}}finally{this.loading=!1}}}},ie={class:"min-h-screen content-bg flex items-center justify-center p-4"},ae={class:"form-card rounded-xl overflow-hidden max-w-md w-full"},ne={class:"form-content p-8"};function de(l,e,o,m,s,a){const t=b("RegistrationForm"),p=b("RegistrationFooter"),g=b("AppAlert");return u(),d("div",ie,[r("div",ae,[e[1]||(e[1]=r("div",{class:"header-bg p-8 text-center"},[r("h1",{class:"text-4xl font-bold text-white tracking-wider mb-2"},"Q-LAP"),r("p",{class:"text-white/90 text-sm"},"Ustvari račun")],-1)),r("div",ne,[n(t,{loading:s.loading,onSubmit:a.handleRegister},null,8,["loading","onSubmit"]),n(p)])]),n(g,{visible:s.alert.show,type:s.alert.type,message:s.alert.message,onClose:e[0]||(e[0]=x=>s.alert.show=!1)},null,8,["visible","type","message"])])}const be=c(re,[["render",de],["__scopeId","data-v-45f8e426"]]);export{be as default};
