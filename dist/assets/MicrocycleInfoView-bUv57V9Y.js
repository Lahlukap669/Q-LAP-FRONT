import{a as I}from"./api-wZ4aHSpU.js";import{T as D}from"./TrainerHeader-DSZRr5hb.js";import{A as M}from"./AppAlert-Dq9MU9kQ.js";import{_ as O,c as n,e as v,b as m,f as x,a as e,t as i,d as E,k as N,n as _,l as j,m as y,F as u,j as b,o as r}from"./index-DRO6Msb-.js";const C={name:"MicrocycleInfoView",components:{TrainerHeader:D,AppAlert:M},data(){return{loading:!0,error:null,microcycleInfo:null,selectedDayOfWeek:1,showModal:!1,selectedExercise:{},headerMounted:!1,alert:{show:!1,type:"info",message:""}}},computed:{userFullName(){const a=JSON.parse(localStorage.getItem("user")||"{}");return`${a.first_name} ${a.last_name}`||"Trainer"},microcycleId(){return this.$route.params.microcycleId},formattedExerciseDate(){var t;if(!((t=this.microcycleInfo)!=null&&t.methods)||this.microcycleInfo.methods.length===0)return"Ni datuma";const a=this.microcycleInfo.methods[0];return a.exercises&&a.exercises.length>0?new Date(a.exercises[0].exercise_date).toLocaleDateString("sl-SI",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"No Date"}},methods:{showAlert(a,t){this.alert={show:!0,type:a,message:t}},async fetchMicrocycleInfo(){var a,t,f;this.headerMounted||(this.loading=!0),this.error=null;try{const c=await I.get(`/users/trainer/microcycle-info/${this.microcycleId}/${this.selectedDayOfWeek}`);this.microcycleInfo=c.data.microcycle_info,this.headerMounted||(this.headerMounted=!0)}catch(c){console.error("Napaka pri pridobivanju mikrocikla:",c),((a=c.response)==null?void 0:a.status)===401?(localStorage.removeItem("access_token"),localStorage.removeItem("user"),this.$router.push("/login")):this.error=((f=(t=c.response)==null?void 0:t.data)==null?void 0:f.message)||"Napaka pri nalaganju informacij o mikrociklu."}finally{this.loading=!1}},onDayChange(){this.loading=!0,this.fetchMicrocycleInfo()},previousDay(){this.selectedDayOfWeek>1&&(this.selectedDayOfWeek=this.selectedDayOfWeek-1,this.loading=!0,this.fetchMicrocycleInfo())},nextDay(){this.selectedDayOfWeek<7&&(this.selectedDayOfWeek=this.selectedDayOfWeek+1,this.loading=!0,this.fetchMicrocycleInfo())},showExerciseInfo(a){this.selectedExercise=a,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedExercise={}},editExercise(a){this.showAlert("Info","Funkcionalnost za urejanje bo narejena v kratkem.")},logout(){localStorage.removeItem("access_token"),localStorage.removeItem("user"),this.$router.push("/login")}},mounted(){if(!localStorage.getItem("access_token")){this.$router.push("/login");return}this.$route.params.dayOfWeek&&(this.selectedDayOfWeek=parseInt(this.$route.params.dayOfWeek)),this.fetchMicrocycleInfo()}},W={class:"min-h-screen microcycle-bg"},S={key:0,class:"flex items-center justify-center min-h-screen"},A={key:1,class:"flex items-center justify-center min-h-screen"},V={class:"text-center bg-white rounded-xl p-8 mx-4"},T={class:"text-gray-600 mb-4"},P={key:2,class:"container mx-auto px-4 py-6"},F={class:"exercise-date-header rounded-xl p-6 mb-6"},B={class:"flex items-center justify-between"},H={class:"flex items-center space-x-6"},L={class:"flex items-center space-x-3"},R={class:"text-2xl font-bold text-white"},z={class:"flex items-center space-x-3"},J=["disabled"],U=["disabled"],K={key:0,class:"flex items-center text-white"},X={class:"exercises-table rounded-xl overflow-hidden"},q={class:"exercise-rows"},G={class:"col-span-1 flex justify-center"},Q=["checked"],Y={class:"col-span-3 flex items-center space-x-2"},Z={class:"exercise-name"},$=["onClick"],ee={class:"col-span-1 text-center parameter-value"},te={class:"col-span-1 text-center parameter-value"},se={class:"col-span-1 text-center parameter-value"},oe={class:"col-span-1 text-center parameter-value"},ae={class:"col-span-1 text-center parameter-value"},ie={class:"col-span-1 text-center parameter-value"},le={class:"col-span-1 text-center"},ne={class:"method-group-badge"},re={class:"col-span-1 flex justify-center"},ce=["onClick"],de={key:0,class:"empty-state"},fe={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},me={class:"modal-content max-w-2xl w-full max-h-[80vh] overflow-y-auto"},ue={class:"flex justify-between items-start mb-4"},pe={class:"modal-title"},he={class:"exercise-details"},ve={class:"detail-row"},xe={class:"detail-value"},_e={class:"detail-row"},ye={class:"detail-value"},be={class:"exercise-description"},ge={class:"description-text"};function ke(a,t,f,c,o,l){var p,h;const g=x("TrainerHeader"),k=x("AppAlert");return r(),n("div",W,[v(g,{"user-full-name":l.userFullName,onLogout:l.logout},null,8,["user-full-name","onLogout"]),o.loading&&!o.headerMounted?(r(),n("div",S,t[7]||(t[7]=[e("div",{class:"text-center"},[e("i",{class:"fas fa-spinner fa-spin text-4xl text-white mb-4"}),e("p",{class:"text-white text-lg"},"Nalaganje mikrocikla...")],-1)]))):o.error&&!o.headerMounted?(r(),n("div",A,[e("div",V,[t[9]||(t[9]=e("i",{class:"fas fa-exclamation-triangle text-4xl text-red-500 mb-4"},null,-1)),t[10]||(t[10]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Napaka pri nalaganju mikrocikla",-1)),e("p",T,i(o.error),1),e("button",{onClick:t[0]||(t[0]=(...s)=>l.fetchMicrocycleInfo&&l.fetchMicrocycleInfo(...s)),class:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200"},t[8]||(t[8]=[e("i",{class:"fas fa-redo mr-2"},null,-1),E("Poskusi ponovno ")]))])])):(r(),n("div",P,[e("div",F,[e("div",B,[e("div",H,[e("div",L,[t[11]||(t[11]=e("i",{class:"fas fa-calendar text-2xl text-white"},null,-1)),e("h1",R,i(l.formattedExerciseDate),1)]),e("div",z,[e("button",{onClick:t[1]||(t[1]=s=>l.previousDay()),disabled:o.selectedDayOfWeek<=1,class:_(["nav-button",{"opacity-50 cursor-not-allowed":o.selectedDayOfWeek<=1}])},t[12]||(t[12]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),10,J),N(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.selectedDayOfWeek=s),onChange:t[3]||(t[3]=(...s)=>l.onDayChange&&l.onDayChange(...s)),class:"day-select-inline"},t[13]||(t[13]=[y('<option value="1" data-v-46f12b10>Ponedeljek</option><option value="2" data-v-46f12b10>Torek</option><option value="3" data-v-46f12b10>Sreda</option><option value="4" data-v-46f12b10>Četrtek</option><option value="5" data-v-46f12b10>Petek</option><option value="6" data-v-46f12b10>Sobota</option><option value="7" data-v-46f12b10>Nedelja</option>',7)]),544),[[j,o.selectedDayOfWeek]]),e("button",{onClick:t[4]||(t[4]=s=>l.nextDay()),disabled:o.selectedDayOfWeek>=7,class:_(["nav-button",{"opacity-50 cursor-not-allowed":o.selectedDayOfWeek>=7}])},t[14]||(t[14]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),10,U)])]),o.loading&&o.headerMounted?(r(),n("div",K,t[15]||(t[15]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),e("span",null,"Nalaganje...",-1)]))):m("",!0)])]),e("div",X,[t[19]||(t[19]=y('<div class="table-header grid grid-cols-12 gap-4 p-4" data-v-46f12b10><div class="col-span-1" data-v-46f12b10></div><div class="col-span-3 text-center font-semibold text-white" data-v-46f12b10>VAJA</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>SERIJE</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>PONOVITVE</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>OBREMENITEV %</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>VO2 MAX</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>HR %</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>POČITEK</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>SKUPINA</div><div class="col-span-1 text-center font-semibold text-white" data-v-46f12b10>UREDI</div></div>',1)),e("div",q,[(r(!0),n(u,null,b(((p=o.microcycleInfo)==null?void 0:p.methods)||[],s=>(r(),n(u,{key:s.method_id},[(r(!0),n(u,null,b(s.exercises,d=>(r(),n("div",{key:d.exercise_id,class:"exercise-row grid grid-cols-12 gap-4 p-4 items-center hover:bg-white/10 transition duration-200"},[e("div",G,[e("input",{type:"checkbox",checked:d.exercise_finished,class:"exercise-checkbox",disabled:""},null,8,Q)]),e("div",Y,[e("span",Z,i(d.exercise_name),1),e("button",{onClick:w=>l.showExerciseInfo(d),class:"info-button"},t[16]||(t[16]=[e("i",{class:"fas fa-info-circle"},null,-1)]),8,$)]),e("div",ee,i(s.method_parameters.sets||"/"),1),e("div",te,i(s.method_parameters.repetitions||"/"),1),e("div",se,i(s.method_parameters.burden_percentage_of_mvc?s.method_parameters.burden_percentage_of_mvc+" %":"/"),1),e("div",oe,i(s.method_parameters.vo2_max?s.method_parameters.vo2_max+" %":"/"),1),e("div",ae,i(s.method_parameters.hr_percentage?s.method_parameters.hr_percentage+" %":"/"),1),e("div",ie,i((Math.floor(s.method_parameters.rest_seconds/60)!==0?Math.floor(s.method_parameters.rest_seconds/60)+" min ":"")+(s.method_parameters.rest_seconds%60!==0?s.method_parameters.rest_seconds%60+" s":"")||"/"),1),e("div",le,[e("span",ne,i(s.method_group),1)]),e("div",re,[e("button",{onClick:w=>l.editExercise(d),class:"edit-button"},t[17]||(t[17]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ce)])]))),128))],64))),128))]),!((h=o.microcycleInfo)!=null&&h.methods)||o.microcycleInfo.methods.length===0?(r(),n("div",de,t[18]||(t[18]=[e("div",{class:"text-center py-12"},[e("i",{class:"fas fa-dumbbell text-4xl text-white/50 mb-4"}),e("h3",{class:"text-xl font-bold text-white mb-2"},"Na vaj."),e("p",{class:"text-white/80"},"Na ta dan ni predvidena nobena vaja.")],-1)]))):m("",!0)])])),o.showModal?(r(),n("div",fe,[e("div",me,[e("div",ue,[e("h1",pe,i(o.selectedExercise.exercise_name),1),e("button",{onClick:t[5]||(t[5]=(...s)=>l.closeModal&&l.closeModal(...s)),class:"modal-close"},t[20]||(t[20]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",he,[e("div",ve,[t[21]||(t[21]=e("span",{class:"detail-label"},"Težavnost:",-1)),e("span",xe,i(o.selectedExercise.difficulty)+"/10",1)]),e("div",_e,[t[22]||(t[22]=e("span",{class:"detail-label"},"Video:",-1)),e("span",ye,i(o.selectedExercise.video_url!=="/"?"Available":"Not Available"),1)])]),e("div",be,[t[23]||(t[23]=e("h3",{class:"description-title"},"Opis",-1)),e("p",ge,i(o.selectedExercise.description),1)])])])):m("",!0),v(k,{visible:o.alert.show,type:o.alert.type,message:o.alert.message,onClose:t[6]||(t[6]=s=>o.alert.show=!1)},null,8,["visible","type","message"])])}const Oe=O(C,[["render",ke],["__scopeId","data-v-46f12b10"]]);export{Oe as default};
