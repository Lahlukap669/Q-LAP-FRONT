import{a as v,A as k}from"./api-BJgnF3hB.js";import"./index-DBwykkoX.js";import{_ as c,c as u,b as _,a as l,d as f,n as y,t as w,o as m,r as V,e as n,f as b,w as h,g as S}from"./index-CZfNrfaq.js";import{A as N}from"./AppAlert-jdCgL8S3.js";const P={name:"InputField",props:{id:String,type:{type:String,default:"text"},label:String,icon:String,placeholder:String,modelValue:String,disabled:Boolean,required:Boolean},emits:["update:modelValue"]},F={class:"mb-4"},q=["for"],B=["id","type","placeholder","value","disabled","required"];function C(s,e,o,d,t,a){return m(),u("div",F,[o.label?(m(),u("label",{key:0,for:o.id,class:"block text-gray-700 font-medium mb-2"},[o.icon?(m(),u("i",{key:0,class:y([o.icon,"mr-2 text-blue-500"])},null,2)):_("",!0),f(" "+w(o.label),1)],8,q)):_("",!0),l("input",{id:o.id,type:o.type,placeholder:o.placeholder,value:o.modelValue,onInput:e[0]||(e[0]=i=>s.$emit("update:modelValue",i.target.value)),disabled:o.disabled,required:o.required,class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"},null,40,B)])}const R=c(P,[["render",C]]),A={name:"PasswordField",props:{id:String,label:String,placeholder:String,modelValue:String,disabled:Boolean,required:Boolean},emits:["update:modelValue"],data(){return{showPassword:!1}}},U={class:"mb-4 relative"},I=["for"],T={class:"relative"},j=["id","type","placeholder","value","disabled","required"];function E(s,e,o,d,t,a){return m(),u("div",U,[o.label?(m(),u("label",{key:0,for:o.id,class:"block text-gray-700 font-medium mb-2"},[e[2]||(e[2]=l("i",{class:"fas fa-lock mr-2 text-blue-500"},null,-1)),f(" "+w(o.label),1)],8,I)):_("",!0),l("div",T,[l("input",{id:o.id,type:t.showPassword?"text":"password",placeholder:o.placeholder,value:o.modelValue,onInput:e[0]||(e[0]=i=>s.$emit("update:modelValue",i.target.value)),disabled:o.disabled,required:o.required,class:"w-full px-4 py-3 pr-12 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200"},null,40,j),l("button",{type:"button",onClick:e[1]||(e[1]=i=>t.showPassword=!t.showPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition duration-200"},[l("i",{class:y(t.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])}const z=c(A,[["render",E]]),G={name:"CheckboxField",props:{id:String,modelValue:Boolean,disabled:Boolean,required:Boolean},emits:["update:modelValue"]},M={class:"flex items-start mb-4"},J=["id","checked","disabled","required"],L=["for"];function O(s,e,o,d,t,a){return m(),u("div",M,[l("input",{id:o.id,type:"checkbox",checked:o.modelValue,onChange:e[0]||(e[0]=i=>s.$emit("update:modelValue",i.target.checked)),disabled:o.disabled,required:o.required,class:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,40,J),l("label",{for:o.id,class:"ml-3 text-sm text-gray-700 cursor-pointer"},[V(s.$slots,"default")],8,L)])}const Q=c(G,[["render",O]]),Z={name:"SubmitButton",props:{loading:Boolean,disabled:Boolean}},H=["disabled"];function K(s,e,o,d,t,a){return m(),u("button",{type:"submit",disabled:o.disabled,class:"submit-button w-full py-3 px-6 text-white font-bold text-lg rounded-xl transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},[V(s.$slots,"default",{},void 0,!0)],8,H)}const W=c(Z,[["render",K],["__scopeId","data-v-af64ee55"]]),X={name:"RegistrationForm",components:{InputField:R,PasswordField:z,CheckboxField:Q,SubmitButton:W},props:{loading:Boolean},emits:["submit"],data(){return{form:{firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",isTrainer:!1,gdprConsent:!1}}},computed:{passwordError(){if(this.form.password&&this.form.confirmPassword){if(this.form.password!==this.form.confirmPassword)return"Gesli se ne ujemata";if(this.form.password.length<6)return"Geslo mora biti dolgo vsaj 6 znakov"}return null},isFormValid(){return this.form.firstName&&this.form.lastName&&this.form.email&&this.form.phoneNumber&&this.form.password&&this.form.confirmPassword&&this.form.gdprConsent&&!this.passwordError}},methods:{handleSubmit(){this.isFormValid&&this.$emit("submit",this.form)}}},Y={class:"grid grid-cols-2 gap-4"},D={key:0,class:"text-red-500 text-sm"};function $(s,e,o,d,t,a){const i=b("InputField"),p=b("PasswordField"),g=b("CheckboxField"),x=b("SubmitButton");return m(),u("form",{onSubmit:e[8]||(e[8]=S((...r)=>a.handleSubmit&&a.handleSubmit(...r),["prevent"])),class:"space-y-4"},[l("div",Y,[n(i,{id:"firstName",type:"text",label:"Ime",icon:"fas fa-user",placeholder:"John",modelValue:t.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.firstName=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(i,{id:"lastName",type:"text",label:"Priimek",icon:"fas fa-user",placeholder:"Doe",modelValue:t.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.lastName=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"])]),n(i,{id:"email",type:"email",label:"Email",icon:"fas fa-envelope",placeholder:"john.doe@example.com",modelValue:t.form.email,"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.email=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(i,{id:"phoneNumber",type:"tel",label:"Telefonska številka",icon:"fas fa-phone",placeholder:"+1 (555) 123-4567",modelValue:t.form.phoneNumber,"onUpdate:modelValue":e[3]||(e[3]=r=>t.form.phoneNumber=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(p,{id:"password",label:"Geslo",placeholder:"Ustvari geslo",modelValue:t.form.password,"onUpdate:modelValue":e[4]||(e[4]=r=>t.form.password=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),n(p,{id:"confirmPassword",label:"Potrdite geslo",placeholder:"Potrdi geslo",modelValue:t.form.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=r=>t.form.confirmPassword=r),disabled:o.loading,required:""},null,8,["modelValue","disabled"]),a.passwordError?(m(),u("div",D,w(a.passwordError),1)):_("",!0),n(g,{id:"isTrainer",modelValue:t.form.isTrainer,"onUpdate:modelValue":e[6]||(e[6]=r=>t.form.isTrainer=r),disabled:o.loading},{default:h(()=>e[9]||(e[9]=[l("i",{class:"fas fa-dumbbell mr-2 text-blue-500"},null,-1),f("Sem trener/ka ")])),_:1,__:[9]},8,["modelValue","disabled"]),n(g,{id:"gdprConsent",modelValue:t.form.gdprConsent,"onUpdate:modelValue":e[7]||(e[7]=r=>t.form.gdprConsent=r),disabled:o.loading,required:""},{default:h(()=>e[10]||(e[10]=[f(" Strinjam se z "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800"},"določili in pogoji",-1),f(" ter z "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800"},"Zasebno politiko",-1)])),_:1,__:[10]},8,["modelValue","disabled"]),n(x,{loading:o.loading,disabled:o.loading||!a.isFormValid,class:"w-full"},{default:h(()=>[e[11]||(e[11]=l("i",{class:"fas fa-user-plus mr-2"},null,-1)),f(" "+w(o.loading?"Ustvarjam račun...":"Ustvari račun"),1)]),_:1,__:[11]},8,["loading","disabled"])],32)}const ee=c(X,[["render",$]]),oe={name:"RegistrationFooter"},te={class:"mt-6 text-center"},se={class:"text-gray-600 text-sm"};function le(s,e,o,d,t,a){const i=b("router-link");return m(),u("div",te,[l("div",se,[e[1]||(e[1]=f(" Že imaš račun? ")),n(i,{to:"/login",class:"text-blue-600 hover:text-blue-800 font-semibold transition duration-200"},{default:h(()=>e[0]||(e[0]=[f(" Prijava ")])),_:1,__:[0]})])])}const re=c(oe,[["render",le]]),ie={name:"RegisterView",components:{RegistrationForm:ee,RegistrationFooter:re,AppAlert:N},data(){return{loading:!1,alert:{show:!1,type:"info",message:""}}},methods:{showAlert(s,e){this.alert={show:!0,type:s,message:e}},async handleRegister(s){var e,o;this.loading=!0;try{const d=await v.post(`${k.REGISTER}`,{first_name:s.firstName,last_name:s.lastName,phone_number:s.phoneNumber,email:s.email,password:s.password,role:s.isTrainer?2:1,gdpr_consent:s.gdprConsent});this.showAlert("success",d.data.message||"Uporabnik uspešno registriran"),setTimeout(()=>{this.$router.push("/login")},2e3)}catch(d){const t=((o=(e=d.response)==null?void 0:e.data)==null?void 0:o.message)||"Registracija ni uspešna. Poskusite ponovno.";this.showAlert("error",t),console.error("Registration error:",d)}finally{this.loading=!1}}}},ne={class:"min-h-screen content-bg flex items-center justify-center p-4"},ae={class:"form-card rounded-xl overflow-hidden max-w-md w-full"},de={class:"form-content p-8"};function ue(s,e,o,d,t,a){const i=b("RegistrationForm"),p=b("RegistrationFooter"),g=b("AppAlert");return m(),u("div",ne,[l("div",ae,[e[1]||(e[1]=l("div",{class:"header-bg p-8 text-center"},[l("h1",{class:"text-4xl font-bold text-white tracking-wider mb-2"},"Q-LAP"),l("p",{class:"text-white/90 text-sm"},"Ustvari račun")],-1)),l("div",de,[n(i,{loading:t.loading,onSubmit:a.handleRegister},null,8,["loading","onSubmit"]),n(p)])]),n(g,{visible:t.alert.show,type:t.alert.type,message:t.alert.message,onClose:e[0]||(e[0]=x=>t.alert.show=!1)},null,8,["visible","type","message"])])}const pe=c(ie,[["render",ue],["__scopeId","data-v-b7960f74"]]);export{pe as default};
