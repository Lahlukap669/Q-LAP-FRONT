import{a as x,A as y}from"./api-BJgnF3hB.js";import"./index-DBwykkoX.js";import{_ as p,c as m,a as i,r as w,o as c,b,d as g,n as L,t as h,e as l,f as u,w as _,g as S,F as V}from"./index-CZfNrfaq.js";import{B}from"./BaseButton-B1l1TnMm.js";import{A as k}from"./AppAlert-jdCgL8S3.js";const A={name:"LoginCard"},j={class:"min-h-screen content-bg flex items-center justify-center p-4"},I={class:"form-card rounded-xl overflow-hidden max-w-md w-full"},$={class:"form-content p-8"};function F(s,e,t,r,o,n){return c(),m("div",j,[i("div",I,[e[0]||(e[0]=i("div",{class:"header-bg p-8 text-center"},[i("h1",{class:"text-4xl font-bold text-white tracking-wider mb-2"},"Q-LAP"),i("p",{class:"text-white/90 text-sm"},"Quick Layered Annual Periodization")],-1)),i("div",$,[w(s.$slots,"default",{},void 0,!0)])])])}const N=p(A,[["render",F],["__scopeId","data-v-a77e8eb7"]]),C={name:"BaseInput",props:{id:String,type:{type:String,default:"text"},label:String,icon:String,placeholder:String,modelValue:String,disabled:Boolean,required:Boolean},emits:["update:modelValue"]},P={class:"mb-4"},q=["for"],z=["id","type","placeholder","value","disabled","required"];function E(s,e,t,r,o,n){return c(),m("div",P,[t.label?(c(),m("label",{key:0,for:t.id,class:"block text-gray-700 font-medium mb-2"},[t.icon?(c(),m("i",{key:0,class:L([t.icon,"mr-2 text-blue-500"])},null,2)):b("",!0),g(" "+h(t.label),1)],8,q)):b("",!0),i("input",{id:t.id,type:t.type,placeholder:t.placeholder,value:t.modelValue,onInput:e[0]||(e[0]=a=>s.$emit("update:modelValue",a.target.value)),disabled:t.disabled,required:t.required,class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none input-focus transition duration-200"},null,40,z)])}const O=p(C,[["render",E],["__scopeId","data-v-660de889"]]),T={name:"LoginForm",components:{BaseInput:O,BaseButton:B},props:{loading:Boolean},emits:["submit"],data(){return{form:{email:"",password:""}}},methods:{handleSubmit(){this.$emit("submit",this.form)}}};function U(s,e,t,r,o,n){const a=u("BaseInput"),f=u("BaseButton");return c(),m("form",{onSubmit:e[2]||(e[2]=S((...d)=>n.handleSubmit&&n.handleSubmit(...d),["prevent"])),class:"space-y-6"},[l(a,{id:"email",type:"email",label:"E-pošta",icon:"fas fa-user",placeholder:"Vnesi svoj e-poštni naslov",modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=d=>o.form.email=d),disabled:t.loading,required:""},null,8,["modelValue","disabled"]),l(a,{id:"password",type:"password",label:"Geslo",icon:"fas fa-lock",placeholder:"Vnesi svoje geslo",modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.form.password=d),disabled:t.loading,required:""},null,8,["modelValue","disabled"]),l(f,{type:"submit",variant:"primary",loading:t.loading,disabled:t.loading},{default:_(()=>[g(h(t.loading?"Prijavljanje...":"Prijava"),1)]),_:1},8,["loading","disabled"])],32)}const G=p(T,[["render",U]]),M={name:"LoginFooter"},Q={class:"mt-6 text-center space-y-3"},D={class:"text-gray-600 text-sm"};function J(s,e,t,r,o,n){const a=u("router-link");return c(),m("div",Q,[e[2]||(e[2]=i("div",null,[i("a",{href:"#",class:"text-blue-600 hover:text-blue-800 text-sm transition duration-200"}," Pozabljeno geslo? ")],-1)),i("div",D,[e[1]||(e[1]=g(" Še nimaš računa? ")),l(a,{to:"/register",class:"text-green-600 hover:text-green-800 font-semibold transition duration-200"},{default:_(()=>e[0]||(e[0]=[g(" Registracija ")])),_:1,__:[0]})])])}const R=p(M,[["render",J]]),H={name:"LoginView",components:{LoginCard:N,LoginForm:G,LoginFooter:R,AppAlert:k},data(){return{loading:!1,alert:{show:!1,type:"info",message:""}}},methods:{showAlert(s,e){this.alert={show:!0,type:s,message:e}},async handleLogin(s){var e,t;this.loading=!0;try{const r=await x.post(y.LOGIN,{email:s.email,password:s.password}),{access_token:o,user:n,message:a}=r.data;localStorage.setItem("access_token",o),localStorage.setItem("user",JSON.stringify(n)),this.showAlert("success",a||"Uspešna prijava"),setTimeout(()=>{n.role===2?this.$router.push("/trainer"):this.$router.push("/athlete")},1500)}catch(r){const o=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Prijava neuspešna. Poskusi ponovno.";this.showAlert("Napaka:",o),console.error("Napaka pri prijavi:",r)}finally{this.loading=!1}}}};function K(s,e,t,r,o,n){const a=u("LoginForm"),f=u("LoginFooter"),d=u("LoginCard"),v=u("AppAlert");return c(),m(V,null,[l(d,null,{default:_(()=>[l(a,{loading:o.loading,onSubmit:n.handleLogin},null,8,["loading","onSubmit"]),l(f)]),_:1}),l(v,{visible:o.alert.show,type:o.alert.type,message:o.alert.message,onClose:e[0]||(e[0]=W=>o.alert.show=!1)},null,8,["visible","type","message"])],64)}const oe=p(H,[["render",K]]);export{oe as default};
